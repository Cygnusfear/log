// Log by Josh Avanier
var Log={log:[],status:function(){return"undefined"==Log.log[Log.log.length-1].e?"grn":"red"},display:function(){var a=document.getElementById("logbook"),e=Log.time,d=Aequirys;a.className="bn f6 mon";for(var c=function(a,b){var e=null==a?0:a.length;if(!e)return[];b=e-(void 0===b?1:b);var c=0>b?0:b;var d=e;if(e=null==a?0:a.length){c=null==c?0:c;d=void 0===d?e:d;0>c&&(c=-c>e?0:e+c);d=d>e?e:d;0>d&&(d+=e);e=c>d?0:d-c>>>0;c>>>=0;d=-1;for(var f=Array(e);++d<e;)f[d]=a[d+c];c=f}else c=[];return c}(Log.log,
30),f=0,b=c.length;f<b;f++){var g=c[f],h=a.insertRow(f+2),m=h.insertCell(0),n=h.insertCell(1),k=h.insertCell(2),p=h.insertCell(3),q=h.insertCell(4),r=h.insertCell(5);h=h.insertCell(6);var l=e.parse(g.s),v=e.parse(g.e),t=e.convert(l),u=function(e,a){e.innerHTML=a};u(m,d.dis(d.con(new Date(t.getFullYear(),t.getMonth(),t.getDate()))));u(n,e.stamp(l));u(k,e.stamp(v));u(p,e.duration(l,v).toFixed(2));q.innerHTML=g.c;r.innerHTML=g.t;h.innerHTML=g.d}},vis:{line:function(a,e){for(var d=document.getElementById(e),
c=0,f=0,b={},g=0,h=a.length;g<h;b={e:b.e,date:b.date,lt:b.lt},g++){b.e=a[g];b.lt=Log.time;var m=function(a){return function(b){var d=document.createElement("div");d.className="psr t0 sh1 mb2 lf "+("PHO"==a.e.c?"bg-bdbdbd":"RES"==a.e.c?"bg-a9a9a9":"DSG"==a.e.c?"bg-969696":"ACA"==a.e.c?"bg-828282":"bg-blanc");d.style.width=b.p+"%";d.style.margin="0 0 0 "+b.m+"%";document.getElementById(e+a.date).appendChild(d);c=b.p;f=b.dp}}(b),n=function(a){return function(e,b){var d=(e-b)/86400*100,g=a.lt.convert(b),
h=g.getFullYear(),k=g.getMonth(),l=g.getDate(),t=(new Date(h,k,l)).getTime()/1E3;g=((new Date(h,k,l,g.getHours(),g.getMinutes(),g.getSeconds())).getTime()/1E3-t)/((new Date(h,k,l,23,59,59)).getTime()/1E3-t)*100;return{dp:g,p:d,m:g-(c+f)}}}(b),k=function(a){f=c=0;var b=document.createElement("div");b.className="db wf sh1 mt2 mb3 bsia bg-noir br1";b.id=e+a;d.appendChild(b)};if("undefined"!=b.e.e){var p=b.lt.parse(b.e.s),q=b.lt.parse(b.e.e);b.date=b.lt.date(p);var r=b.lt.date(q),l=e+b.date;b.date!==
r?(null==document.getElementById(l)&&k(b.date),l=b.lt.convert(p),l=(new Date(l.getFullYear(),l.getMonth(),l.getDate(),23,59)).getTime()/1E3,m(n(b.lt.parse((+l).toString(16)),p)),null==document.getElementById(e+r)&&k(r),k=b.lt.convert(q),k=(new Date(k.getFullYear(),k.getMonth(),k.getDate(),0,0)).getTime()/1E3,m(n(q,b.lt.parse((+k).toString(16))))):(null==document.getElementById(l)&&k(b.date),m(n(q,p)))}}},bar:function(a,e){for(var d=document.getElementById(e),c=0,f=Log.time,b={},g=0,h=a.length;g<h;b=
{e:b.e,date:b.date},g++){b.e=a[g];var m=function(a){return function(b){var e=document.createElement("div");e.className="psa wf fw "+("PHO"==a.e.c?"bg-bdbdbd":"RES"==a.e.c?"bg-a9a9a9":"DSG"==a.e.c?"bg-969696":"ACA"==a.e.c?"bg-828282":"bg-blanc");e.style.height=b+"%";e.style.bottom=c+"%";document.getElementById(a.date).appendChild(e);c+=b}}(b),n=function(a,b){return(a-b)/86400*100},k=function(a){c=0;var b=document.createElement("div");b.className="dib hf psr";b.style.width="1%";b.id=a;d.appendChild(b)};
if("undefined"!=b.e.e){var p=f.parse(b.e.s),q=f.parse(b.e.e);b.date=f.date(p);var r=f.date(q);if(b.date!==r){null==document.getElementById(b.date)&&k(b.date);var l=f.convert(p);l=(new Date(l.getFullYear(),l.getMonth(),l.getDate(),23,59)).getTime()/1E3;m(n(f.parse((+l).toString(16)),p));null==document.getElementById(r)&&k(r);k=f.convert(q);k=(new Date(k.getFullYear(),k.getMonth(),k.getDate(),0,0)).getTime()/1E3;m(n(q,f.parse((+k).toString(16))))}else null==document.getElementById(b.date)&&k(b.date),
m(n(q,p))}}},day:function(){document.getElementById("daychart");for(var a=Log.data.getEntries(new Date),e=0,d=0,c={},f=0,b=a.length;f<b;c={e:c.e,lt:c.lt},f++){c.e=a[f];c.lt=Log.time;var g=function(a){return function(b){var c=document.createElement("div");c.className="psr t0 hf mb2 lf "+("PHO"==a.e.c?"bg-bdbdbd":"RES"==a.e.c?"bg-a9a9a9":"DSG"==a.e.c?"bg-969696":"ACA"==a.e.c?"bg-828282":"bg-blanc");c.style.width=b.p+"%";c.style.margin="0 0 0 "+b.m+"%";document.getElementById("dayChart").appendChild(c);
e=b.p;d=b.dp}}(c),h=function(a){return function(b,c){var f=(b-c)/86400*100,g=a.lt.convert(c),h=g.getFullYear(),k=g.getMonth(),m=g.getDate(),n=(new Date(h,k,m)).getTime()/1E3;g=((new Date(h,k,m,g.getHours(),g.getMinutes(),g.getSeconds())).getTime()/1E3-n)/((new Date(h,k,m,23,59,59)).getTime()/1E3-n)*100;return{dp:g,p:f,m:g-(e+d)}}}(c);if("undefined"!=c.e.e){var m=c.lt.parse(c.e.s),n=c.lt.parse(c.e.e);c.lt.date(m);c.lt.date(n);g(h(n,m))}}},peakH:function(){for(var a=document.getElementById("peakTimesChart"),
e=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],d=0,c=Log.log.length;d<c;d++){var f=Log.log[d];"undefined"!=f.e&&(f=Log.time.convert(Log.time.parse(f.s)),e[f.getHours()]++)}var b=e.reduce(function(a,b){return Math.max(a,b)});d={i$0:0};for(c=e.length;d.i$0<c;d={i$0:d.i$0},d.i$0++)(function(c){return function(d){d=document.createElement("div");d.className="dib hf psr line";d.style.width=100/24+"%";d.id="peak-"+c.i$0;a.appendChild(d);d=document.createElement("div");var f=c.i$0==(new Date).getHours()?
"bg-blanc":"bg-828282";d.className="psa wf fw "+f;d.style.height=e[c.i$0]/b*100+"%";d.style.bottom="0";document.getElementById("peak-"+c.i$0).appendChild(d)}})(d)()},peakD:function(){for(var a=document.getElementById("peakDaysChart"),e=[0,0,0,0,0,0,0],d=0,c=Log.log.length;d<c;d++){var f=Log.log[d];"undefined"!=f.e&&(f=Log.time.convert(Log.time.parse(f.s)),e[f.getDay()]++)}var b=e.reduce(function(a,b){return Math.max(a,b)});d={i$2:0};for(c=e.length;d.i$2<c;d={i$2:d.i$2},d.i$2++)(function(d){return function(c){c=
document.createElement("div");c.className="dib hf psr line";c.style.width=100/7+"%";c.id="peakday-"+d.i$2;a.appendChild(c);c=document.createElement("div");var f=d.i$2==(new Date).getHours()?"bg-blanc":"bg-828282";c.className="psa wf fw "+f;c.style.height=e[d.i$2]/b*100+"%";c.style.bottom="0";document.getElementById("peakday-"+d.i$2).appendChild(c)}})(d)()}},time:{parse:function(a){return parseInt(a,16)},convert:function(a){return new Date(1E3*a)},stamp:function(a){var e=Log.time.convert(a);a="0"+
e.getHours();var d="0"+e.getMinutes();e="0"+e.getSeconds();return a.substr(-2)+":"+d.substr(-2)+":"+e.substr(-2)},date:function(a){a=Log.time.convert(a);return a.getFullYear()+""+a.getMonth()+""+a.getDate()},duration:function(a,e){return(e-a)/3600}},data:{getEntries:function(a){var e=[],d=Log.time;if(void 0==a){a=0;for(var c=Log.log.length;a<c;a++)d=Log.log[a],"undefined"!=d.e&&e.push(d)}else{var f=0;for(c=Log.log.length;f<c;f++){var b=Log.log[f];if("undefined"!=b.e){var g=d.convert(d.parse(b.s));
g.getFullYear()==a.getFullYear()&&g.getMonth()==a.getMonth()&&g.getDate()==a.getDate()&&e.push(b)}}}return e},listProjects:function(a){for(var e=[],d=Log.time,c=0,f=Log.log.length;c<f;c++){var b=Log.log[c],g=b.t,h="undefined"!=b.e&&-1==e.indexOf(g);void 0==a&&h?e.push(g):void 0!=a&&h&&(b=d.convert(d.parse(b.s)),b.getFullYear()==a.getFullYear()&&b.getMonth()==a.getMonth()&&b.getDate()==a.getDate()&&e.push(g))}return e},listSectors:function(a){for(var e=[],d=Log.time,c=0,f=Log.log.length;c<f;c++){var b=
Log.log[c],g=b.c,h="undefined"!=b.e&&-1==e.indexOf(g);void 0==a&&h?e.push(g):void 0!=a&&h&&(b=d.convert(d.parse(b.s)),b.getFullYear()==a.getFullYear()&&b.getMonth()==a.getMonth()&&b.getDate()==a.getDate()&&e.push(g))}return e},lsmin:function(a){var e,d=Log.time,c=function(a){a=Number(d.duration(d.parse(a.s),d.parse(a.e)));if(a<e||void 0==e)e=a};if(void 0!=a){var f=Log.data.getEntries(a);if(0==f.length)return 0;var b=0}else{f=Log.data.getEntries();if(0==f.length)return 0;b=0}for(a=f.length;b<a;b++)c(f[b]);
return e},lsmax:function(a){var e,d=Log.time,c=function(a){a=Number(d.duration(d.parse(a.s),d.parse(a.e)));if(a>e||void 0==e)e=a};if(void 0!=a){var f=Log.data.getEntries(a);if(0==f.length)return 0;var b=0}else{f=Log.data.getEntries();if(0==f.length)return 0;b=0}for(a=f.length;b<a;b++)c(f[b]);return e},asd:function(){for(var a=0,e=0,d=Log.time,c=0,f=Log.log.length;c<f;c++){var b=Log.log[c];"undefined"!=b.e&&(a+=Number(d.duration(d.parse(b.s),d.parse(b.e))),e++)}return a/e},lh:function(a){var e=0,d=
Log.time,c=function(a){return Number(d.duration(d.parse(a.s),d.parse(a.e)))};if(void 0!=a)var f=Log.data.getEntries(a),b=0;else f=Log.data.getEntries(),b=0;for(a=f.length;b<a;b++)e+=c(f[b]);return e},lp:function(a){var e=0;var d=Log.time;void 0!=a?d=0==Log.data.getEntries(a).length?0:Log.data.lh(new Date):(e=d.convert(d.parse(Log.log[0].s)),a=new Date,d=Number(Log.data.lh()),e=Math.ceil((new Date(a.getFullYear(),a.getMonth(),a.getDate())-new Date(e.getFullYear(),e.getMonth(),e.getDate()))/864E5));
return d/(24*(e+1))*100},sh:function(a){for(var e=0,d=Log.time,c=0,f=Log.log.length;c<f;c++){var b=Log.log[c];"undefined"!=b.e&&b.c==a&&(e+=Number(d.duration(d.parse(b.s),d.parse(b.e))))}return e},sp:function(a){return Log.data.sh(a)/Log.data.lh()*100}},openSect:function(a){for(var e=document.getElementsByClassName("sect"),d=document.getElementsByClassName("tab"),c=0,f=e.length;c<f;c++)e[c].style.display="none";e=0;for(f=d.length;e<f;e++)d[e].className="pv1 tab on bg-noir blanc f6 mon tk mr3";document.getElementById(a).style.display=
"block";document.getElementById("b-"+a).className="pv1 tab on bg-noir blanc f6 mon tk mr3 bb"},init:function(){var a=Log.data,e=a.sp,d=new Date,c=function(a,b){document.getElementById(a).innerHTML=b.toFixed(2)};Log.log=log;Log.vis.bar(Log.log,"weekChart");Log.vis.peakH();Log.vis.peakD();Log.vis.day();document.getElementById("status").className="rf mb4 f6 "+Log.status();c("LHH",a.lh());c("LHT",a.lh(d));c("LPH",a.lp());c("LPT",a.lp(d));c("ASD",a.asd());c("LSN",a.lsmin(d));c("LSX",a.lsmax(d));c("LSNH",
a.lsmin());c("LSXH",a.lsmax());c("pCOD",e("COD"));c("pDSG",e("DSG"));c("pRES",e("RES"));c("pPHO",e("PHO"));c("pACA",e("ACA"));Log.vis.line(Log.log,"vis");Log.display()}};
