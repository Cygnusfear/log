var Dash={log:[],status:function(){return"undefined"==Dash.log[Dash.log.length-1].e?"Active":"Idle"},display:function(){var d=document.getElementById("logbook");var c=Dash.log,b=30;b=void 0===b?1:b;var a=null==c?0:c.length;if(a){b=a-b;b=0>b?0:b;var f=a;if(a=null==c?0:c.length){b=null==b?0:b;f=void 0===f?a:f;0>b&&(b=-b>a?0:a+b);f=f>a?a:f;0>f&&(f+=a);a=b>f?0:f-b>>>0;b>>>=0;f=-1;for(var k=Array(a);++f<a;)k[f]=c[f+b]}}d.className="bn f6 mon";c=0;for(b=Dash.log.length;c<b;c++){a=Dash.log[c];var e=d.insertRow(c+
2);f=e.insertCell(0);k=e.insertCell(1);var g=e.insertCell(2),h=e.insertCell(3),l=e.insertCell(4),m=e.insertCell(5);e=e.insertCell(6);var n=Dash.time.parse(a.s),r=Dash.time.parse(a.e),p=Dash.time.convert(n);f.innerHTML=Aequirys.shorter(Aequirys.convert(new Date(p.getFullYear(),p.getMonth(),p.getDate())));k.innerHTML=Dash.time.stamp(n);g.innerHTML=Dash.time.stamp(r);h.innerHTML=Dash.time.duration(n,r).toFixed(2);l.innerHTML=a.c;m.innerHTML=a.t;e.innerHTML=a.d}},visualise:function(){for(var d=document.getElementById("vis"),
c=0,b=0,a={},f=0,k=Dash.log.length;f<k;a={e:a.e},f++){var e=function(a,f){b=c=0;var e=document.createElement("p"),q=document.createElement("div"),g=Dash.time.convert(a);g=Aequirys.convert(new Date(g.getFullYear(),g.getMonth(),g.getDate()));e.className="f6 mon pb1 bb mb3 bsb";e.innerHTML=g.mn+g.dt;q.className="sh2 wf mb1";q.id=f;d.appendChild(e);d.appendChild(q)},g=function(a,d){var f=(a-d)/86400*100,e=Dash.time.convert(d),g=e.getFullYear(),h=e.getMonth(),k=e.getDate(),l=(new Date(g,h,k)).getTime()/
1E3,p=(new Date(g,h,k,23,59,59)).getTime()/1E3,m=Dash.time.convert(a);(new Date(g,h,k,m.getHours(),m.getMinutes(),m.getSeconds())).getTime();e=((new Date(g,h,k,e.getHours(),e.getMinutes(),e.getSeconds())).getTime()/1E3-l)/(p-l)*100;return{dp:e,perc:f,margin:e-(c+b)}};a.e=Dash.log[f];if("undefined"!=a.e.e){var h=Dash.time.parse(a.e.s),l=Dash.time.parse(a.e.e);date=Dash.time.date(h);end=Dash.time.date(l);if(date!==end){null===document.getElementById(date)&&e(h,date);var m=Dash.time.convert(h);m=(new Date(m.getFullYear(),
m.getMonth(),m.getDate(),23,59)).getTime()/1E3;n(g(Dash.time.parse((+m).toString(16)),h));null===document.getElementById(end)&&e(h,end);e=Dash.time.convert(l);e=(new Date(e.getFullYear(),e.getMonth(),e.getDate(),0,0)).getTime()/1E3;n(g(l,Dash.time.parse((+e).toString(16))))}else null===document.getElementById(date)&&e(h,date),n(g(l,h));var n=function(a){return function(d){var e=document.createElement("div"),f="";"PHO"==a.e.c?f="bg-blu":"RES"==a.e.c?f="bg-grn":"DSG"==a.e.c?f="bg-red":"ACA"==a.e.c&&
(f="bg-ylw");e.className="psr t0 bg-noir hf dib "+f;e.style.width=d.perc+"%";e.style.margin="0 0 0 "+d.margin+"%";document.getElementById(date).appendChild(e);c=d.perc;b=d.dp}}(a)}}},time:{parse:function(d){return parseInt(d,16)},convert:function(d){return new Date(1E3*d)},stamp:function(d){var c=Dash.time.convert(d);d="0"+c.getHours();var b="0"+c.getMinutes();c="0"+c.getSeconds();return d.substr(-2)+":"+b.substr(-2)+":"+c.substr(-2)},date:function(d){var c=Dash.time.convert(d);d=c.getFullYear();
var b=c.getMonth();c=c.getDate();return d+""+b+""+c},duration:function(d,c){return(c-d)/3600}},data:{average:function(){for(var d=0,c=0,b=0,a=Dash.log.length;b<a;b++){var f=Dash.log[b];"undefined"!=f.e&&(d+=Number(Dash.time.duration(Dash.time.parse(f.s),Dash.time.parse(f.e))),c++)}return d/c},loggedHours:function(){for(var d=0,c=0,b=Dash.log.length;c<b;c++){var a=Dash.log[c];"undefined"!=a.e&&(d+=Number(Dash.time.duration(Dash.time.parse(a.s),Dash.time.parse(a.e))))}return d},logPercentage:function(){var d=
Number(Dash.data.loggedHours()),c=Dash.time.convert(Dash.time.parse(Dash.log[0].s)),b=new Date;c=Math.ceil((new Date(b.getFullYear(),b.getMonth(),b.getDate())-new Date(c.getFullYear(),c.getMonth(),c.getDate()))/864E5);return d/(24*(c+1))*100},loggedToday:function(){for(var d=0,c=Dash.log.length-1;0<=c;c--){var b=Dash.log[c];if("undefined"!=b.e){var a=Dash.time.parse(b.s),f=Dash.time.convert(a),k=f.getFullYear(),e=f.getMonth();f=f.getDate();var g=new Date,h=g.getFullYear(),l=g.getMonth();g=g.getDate();
k!==h&&e!==l&&f!==g&&(d+=Number(Dash.time.duration(a,Dash.time.parse(b.e))))}}return d},logPercentageToday:function(){for(var d=[],c=Dash.log.length-1;0<=c;c--){var b=Dash.log[c];if("undefined"!=b.e){var a=Dash.time.convert(Dash.time.parse(b.s)),f=a.getFullYear(),k=a.getMonth();a=a.getDate();var e=new Date,g=e.getFullYear(),h=e.getMonth();e=e.getDate();f==g&&k==h&&a==e&&d.push(b)}}console.log(d);if(0==d.length)return 0;c=Number(Dash.data.loggedToday());b=Dash.time.convert(Dash.time.parse(d[0].s));
b.getFullYear();b.getMonth();b.getDate();a=new Date;a.getFullYear();a.getMonth();a.getDate();return c/24*100}},openSect:function(d){for(var c=document.getElementsByClassName("sect"),b=0,a=c.length;b<a;b++)c[b].style.display="none";document.getElementById(d).style.display="block"},init:function(){function d(c,b){document.getElementById(c).innerHTML=b}Dash.log=log;Dash.display();Dash.visualise();d("status",Dash.status());d("loggedHours",Dash.data.loggedHours().toFixed(2)+" h");d("loggedToday",Dash.data.loggedToday().toFixed(2)+
" h");d("logPerc",Dash.data.logPercentage().toFixed(2)+"%");d("logPercToday",Dash.data.logPercentageToday().toFixed(2)+"%");d("ASD",Dash.data.average().toFixed(2)+" h")}};
