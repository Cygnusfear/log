var Dash={log:[],status:function(){return"undefined"==Dash.log[Dash.log.length-1].e?"Active":"Idle"},display:function(){var b=document.getElementById("logbook");var a=Dash.log,c=30;c=void 0===c?1:c;var d=null==a?0:a.length;if(d){c=d-c;c=0>c?0:c;var f=d;if(d=null==a?0:a.length){c=null==c?0:c;f=void 0===f?d:f;0>c&&(c=-c>d?0:d+c);f=f>d?d:f;0>f&&(f+=d);d=c>f?0:f-c>>>0;c>>>=0;f=-1;for(var g=Array(d);++f<d;)g[f]=a[f+c]}}b.className="bn bg-noir blanc f6 mon";a=0;for(c=Dash.log.length;a<c;a++){d=Dash.log[a];
var e=b.insertRow(a+1);f=e.insertCell(0);g=e.insertCell(1);var h=e.insertCell(2),k=e.insertCell(3),l=e.insertCell(4),m=e.insertCell(5);e=e.insertCell(6);var p=Dash.time.parse(d.s),r=Dash.time.parse(d.e),n=Dash.time.convert(p);f.innerHTML=Aequirys.shorter(Aequirys.convert(new Date(n.getFullYear(),n.getMonth(),n.getDate())));g.innerHTML=Dash.time.stamp(p);h.innerHTML=Dash.time.stamp(r);k.innerHTML=Dash.time.duration(p,r).toFixed(2);f.className="ar";g.className="ar";h.className="ar";k.className="ar";
l.innerHTML=d.c;m.innerHTML=d.t;e.innerHTML=d.d}},visualise:function(){for(var b=document.getElementById("vis"),a=0,c=0,d=0,f=Dash.log.length;d<f;d++){var g=Dash.log[d],e=Dash.time.parse(g.s),h=Dash.time.parse(g.e);date=Dash.time.date(e);if(null===document.getElementById(date)){c=a=0;g=document.createElement("p");var k=document.createElement("div"),l=Dash.time.convert(e);g.className="f6 mon pb1 bb mb1";k.className="line";g.innerHTML=Aequirys.shorter(Aequirys.convert(new Date(l.getFullYear(),l.getMonth(),
l.getDate())));k.id=date;b.appendChild(g);b.appendChild(k)}g=(h-e)/86400*100;var m=Dash.time.convert(e);e=m.getFullYear();k=m.getMonth();l=m.getDate();var p=m.getHours(),r=m.getMinutes();m=m.getSeconds();var n=(new Date(e,k,l)).getTime()/1E3,t=(new Date(e,k,l,23,59,59)).getTime()/1E3,q=Dash.time.convert(h);h=q.getHours();var u=q.getMinutes();q=q.getSeconds();(new Date(e,k,l,h,u,q)).getTime();h=((new Date(e,k,l,p,r,m)).getTime()/1E3-n)/(t-n)*100;e=document.createElement("div");e.className="psr t0 bg-noir hf dib";
e.style.width=g+"%";e.style.margin="0 0 0 "+(h-(a+c))+"%";document.getElementById(date).appendChild(e);a=g;c=h}},time:{parse:function(b){return parseInt(b,16)},convert:function(b){return new Date(1E3*b)},stamp:function(b){var a=Dash.time.convert(b);b="0"+a.getHours();var c="0"+a.getMinutes();a="0"+a.getSeconds();return b.substr(-2)+":"+c.substr(-2)+":"+a.substr(-2)},date:function(b){var a=Dash.time.convert(b);b=a.getFullYear();var c=a.getMonth();a=a.getDate();return b+""+c+""+a},duration:function(b,
a){return(a-b)/3600}},data:{loggedHours:function(){for(var b=0,a=0,c=Dash.log.length;a<c;a++){var d=Dash.log[a];b+=Number(Dash.time.duration(Dash.time.parse(d.s),Dash.time.parse(d.e)))}return b},logPercentage:function(){var b=Number(Dash.data.loggedHours()),a=Dash.time.convert(Dash.time.parse(Dash.log[0].s)),c=new Date;a=Math.ceil((new Date(c.getFullYear(),c.getMonth(),c.getDate())-new Date(a.getFullYear(),a.getMonth(),a.getDate()))/864E5);return b/(24*(a+1))*100},loggedToday:function(){for(var b=
0,a=Dash.log.length-1;0<=a;a--){var c=Dash.log[a],d=Dash.time.parse(c.s),f=Dash.time.convert(d),g=f.getFullYear(),e=f.getMonth();f=f.getDate();var h=new Date,k=h.getFullYear(),l=h.getMonth();h=h.getDate();g==k&&e==l&&h==f&&(b+=Number(Dash.time.duration(d,Dash.time.parse(c.e))))}return b},logPercentageToday:function(){for(var b=[],a=Dash.log.length-1;0<=a;a--){var c=Dash.log[a],d=Dash.time.convert(Dash.time.parse(c.s)),f=d.getFullYear(),g=d.getMonth();d=d.getDate();var e=new Date,h=e.getFullYear(),
k=e.getMonth();e=e.getDate();f==h&&g==k&&d==e&&b.push(c)}a=Number(Dash.data.loggedToday());b=Dash.time.convert(Dash.time.parse(b[0].s));b.getFullYear();b.getMonth();b.getDate();d=new Date;d.getFullYear();d.getMonth();d.getDate();return a/24*100}},openSect:function(b){for(var a=document.getElementsByClassName("sect"),c=0,d=a.length;c<d;c++)a[c].style.display="none";document.getElementById(b).style.display="block"},init:function(){Dash.log=log;Dash.display();Dash.visualise();var b=Dash.status();document.getElementById("status").innerHTML=
b;b=Dash.data.loggedHours().toFixed(2)+" h";document.getElementById("loggedHours").innerHTML=b;b=Dash.data.loggedToday().toFixed(2)+" h";document.getElementById("loggedToday").innerHTML=b;b=Dash.data.logPercentage().toFixed(2)+"%";document.getElementById("logPerc").innerHTML=b;b=Dash.data.logPercentageToday().toFixed(2)+"%";document.getElementById("logPercToday").innerHTML=b}};
