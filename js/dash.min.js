var Dash={log:[],status:function(){return"undefined"==Dash.log[Dash.log.length-1].e?"Active":"Idle"},display:function(){var c=document.getElementById("logbook");var a=Dash.log,b=30;b=void 0===b?1:b;var d=null==a?0:a.length;if(d){b=d-b;b=0>b?0:b;var g=d;if(d=null==a?0:a.length){b=null==b?0:b;g=void 0===g?d:g;0>b&&(b=-b>d?0:d+b);g=g>d?d:g;0>g&&(g+=d);d=b>g?0:g-b>>>0;b>>>=0;g=-1;for(var k=Array(d);++g<d;)k[g]=a[g+b]}}c.className="bn f6 mon";a=0;for(b=Dash.log.length;a<b;a++){d=Dash.log[a];var e=c.insertRow(a+
2);g=e.insertCell(0);k=e.insertCell(1);var h=e.insertCell(2),m=e.insertCell(3),n=e.insertCell(4),f=e.insertCell(5);e=e.insertCell(6);var p=Dash.time.parse(d.s),l=Dash.time.parse(d.e),q=Dash.time.convert(p);g.innerHTML=Aequirys.shorter(Aequirys.convert(new Date(q.getFullYear(),q.getMonth(),q.getDate())));k.innerHTML=Dash.time.stamp(p);h.innerHTML=Dash.time.stamp(l);m.innerHTML=Dash.time.duration(p,l).toFixed(2);n.innerHTML=d.c;f.innerHTML=d.t;e.innerHTML=d.d}},visualise:function(){for(var c=document.getElementById("vis"),
a=0,b=0,d=0,g=Dash.log.length;d<g;d++){var k=function(d,g){b=a=0;var e=document.createElement("p"),h=document.createElement("div"),f=Dash.time.convert(d);f=Aequirys.convert(new Date(f.getFullYear(),f.getMonth(),f.getDate()));e.className="f6 mon pb1 bb mb3 bsb";h.className="sh2 wf mb1";e.innerHTML=f.mn+f.dt;h.id=g;c.appendChild(e);c.appendChild(h)},e=function(c,d){var g=(c-d)/86400*100,e=Dash.time.convert(d),f=e.getFullYear(),h=e.getMonth(),k=e.getDate(),m=(new Date(f,h,k)).getTime()/1E3,n=(new Date(f,
h,k,23,59,59)).getTime()/1E3,l=Dash.time.convert(c);(new Date(f,h,k,l.getHours(),l.getMinutes(),l.getSeconds())).getTime();e=((new Date(f,h,k,e.getHours(),e.getMinutes(),e.getSeconds())).getTime()/1E3-m)/(n-m)*100;return{dp:e,perc:g,margin:e-(a+b)}},h=Dash.log[d],m=Dash.time.parse(h.s),n=Dash.time.parse(h.e);date=Dash.time.date(m);end=Dash.time.date(n);if(date!==end){null===document.getElementById(date)&&k(m,date);var f=Dash.time.convert(m);f=(new Date(f.getFullYear(),f.getMonth(),f.getDate(),23,
59)).getTime()/1E3;var p=e(Dash.time.parse((+f).toString(16)),m),l=document.createElement("div");f="";"PHO"==h.c?f="bg-blu":"RES"==h.c?f="bg-grn":"DSG"==h.c?f="bg-red":"ACA"==h.c&&(f="bg-ylw");l.className="psr t0 bg-noir hf dib";l.style.width=p.perc+"%";l.style.margin="0 0 0 "+p.margin+"%";l.style.background=f;document.getElementById(date).appendChild(l);null===document.getElementById(end)&&k(m,end);k=Dash.time.convert(n);k=(new Date(k.getFullYear(),k.getMonth(),k.getDate(),0,0)).getTime()/1E3;e=
e(n,Dash.time.parse((+k).toString(16)));n=document.createElement("div");"PHO"==h.c?f="bg-blu":"RES"==h.c?f="bg-grn":"DSG"==h.c?f="bg-red":"ACA"==h.c&&(f="bg-ylw");n.className="psr t0 bg-noir hf dib ";n.style.width=e.perc+"%";n.style.margin="0 0 0 "+e.margin+"%";document.getElementById(end).appendChild(n);a=e.perc;b=e.dp}else null===document.getElementById(date)&&k(m,date),p=e(n,m),l=document.createElement("div"),f="","PHO"==h.c?f="bg-blu":"RES"==h.c?f="bg-grn":"DSG"==h.c?f="bg-red":"ACA"==h.c&&(f=
"bg-ylw"),l.className="psr t0 bg-noir hf dib "+f,l.style.width=p.perc+"%",l.style.margin="0 0 0 "+p.margin+"%",document.getElementById(date).appendChild(l),a=p.perc,b=p.dp}},time:{parse:function(c){return parseInt(c,16)},convert:function(c){return new Date(1E3*c)},stamp:function(c){var a=Dash.time.convert(c);c="0"+a.getHours();var b="0"+a.getMinutes();a="0"+a.getSeconds();return c.substr(-2)+":"+b.substr(-2)+":"+a.substr(-2)},date:function(c){var a=Dash.time.convert(c);c=a.getFullYear();var b=a.getMonth();
a=a.getDate();return c+""+b+""+a},duration:function(c,a){return(a-c)/3600}},data:{average:function(){for(var c=0,a=0,b=0,d=Dash.log.length;b<d;b++){var g=Dash.log[b];c+=Number(Dash.time.duration(Dash.time.parse(g.s),Dash.time.parse(g.e)));a++}return c/a},loggedHours:function(){for(var c=0,a=0,b=Dash.log.length;a<b;a++){var d=Dash.log[a];c+=Number(Dash.time.duration(Dash.time.parse(d.s),Dash.time.parse(d.e)))}return c},logPercentage:function(){var c=Number(Dash.data.loggedHours()),a=Dash.time.convert(Dash.time.parse(Dash.log[0].s)),
b=new Date;a=Math.ceil((new Date(b.getFullYear(),b.getMonth(),b.getDate())-new Date(a.getFullYear(),a.getMonth(),a.getDate()))/864E5);return c/(24*(a+1))*100},loggedToday:function(){for(var c=0,a=Dash.log.length-1;0<=a;a--){var b=Dash.log[a],d=Dash.time.parse(b.s),g=Dash.time.convert(d),k=g.getFullYear(),e=g.getMonth();g=g.getDate();var h=new Date,m=h.getFullYear(),n=h.getMonth();h=h.getDate();k==m&&e==n&&h==g&&(c+=Number(Dash.time.duration(d,Dash.time.parse(b.e))))}return c},logPercentageToday:function(){for(var c=
[],a=Dash.log.length-1;0<=a;a--){var b=Dash.log[a],d=Dash.time.convert(Dash.time.parse(b.s)),g=d.getFullYear(),k=d.getMonth();d=d.getDate();var e=new Date,h=e.getFullYear(),m=e.getMonth();e=e.getDate();g==h&&k==m&&d==e&&c.push(b)}a=Number(Dash.data.loggedToday());c=Dash.time.convert(Dash.time.parse(c[0].s));c.getFullYear();c.getMonth();c.getDate();d=new Date;d.getFullYear();d.getMonth();d.getDate();return a/24*100}},openSect:function(c){for(var a=document.getElementsByClassName("sect"),b=0,d=a.length;b<
d;b++)a[b].style.display="none";document.getElementById(c).style.display="block"},init:function(){function c(a,b){document.getElementById(a).innerHTML=b}Dash.log=log;Dash.display();Dash.visualise();c("status",Dash.status());c("loggedHours",Dash.data.loggedHours().toFixed(2)+" h");c("loggedToday",Dash.data.loggedToday().toFixed(2)+" h");c("logPerc",Dash.data.logPercentage().toFixed(2)+"%");c("logPercToday",Dash.data.logPercentageToday().toFixed(2)+"%");c("ASD",Dash.data.average().toFixed(2)+" h")}};
